<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Tribunal Eleitoral • Apuração Oficial</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* =====================================================
   ESTILO INSTITUCIONAL – TRIBUNAL ELEITORAL
   ===================================================== */
:root{
    --verde:#1f8f4a;
    --azul:#0b4ea2;
    --cinza:#f2f4f7;
    --escuro:#1f2933;
    --branco:#ffffff;
}

*{
    box-sizing:border-box;
    font-family: Arial, Helvetica, sans-serif;
}

body{
    margin:0;
    background:var(--cinza);
    color:var(--escuro);
}

header{
    background:linear-gradient(90deg,var(--azul),var(--verde));
    color:#fff;
    padding:16px;
    text-align:center;
}

header h1{margin:0;font-size:1.3rem;}
header p{margin:4px 0 0;font-size:0.9rem;}

main{
    max-width:1200px;
    margin:auto;
    padding:16px;
}

.status{
    text-align:center;
    font-weight:bold;
    color:var(--azul);
    margin-bottom:10px;
}

.sessao{
    text-align:center;
    font-weight:bold;
}

.countdown{
    text-align:center;
    font-size:1.4rem;
    color:var(--verde);
    margin-bottom:16px;
}

.painel{
    background:var(--branco);
    border-radius:14px;
    padding:16px;
    margin-bottom:24px;
    box-shadow:0 2px 8px rgba(0,0,0,0.08);
}

.painel h2{
    margin:0;
    color:var(--azul);
}

.sub{
    font-size:0.85rem;
    opacity:0.75;
    margin-bottom:10px;
}

.progress-container{
    background:#ddd;
    height:14px;
    border-radius:10px;
    overflow:hidden;
    margin-bottom:12px;
}

.progress-bar{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,var(--verde),var(--azul));
    transition:width .4s linear;
}

.candidatos{
    display:flex;
    flex-direction:column;
    gap:12px;
}

.card{
    border:2px solid transparent;
    border-radius:12px;
    padding:12px;
}

.card.lider{
    border-color:var(--verde);
    background:#f1fbf5;
}

.nome{font-weight:bold;}
.numero{font-size:.85rem;opacity:.7;}
.porcentagem{font-size:1.2rem;font-weight:bold;}

.zonas{
    margin-top:10px;
    font-size:.9rem;
}

.zona{
    display:flex;
    justify-content:space-between;
    border-bottom:1px solid #eee;
    padding:4px 0;
}

.vh{color:var(--verde);font-weight:bold;}
.va{color:var(--azul);font-weight:bold;}

@media(min-width:700px){
    .candidatos{flex-direction:row;}
}
</style>
</head>

<body>
<header>
    <h1>Tribunal Eleitoral</h1>
    <p>2º Turno • Apuração Oficial</p>
</header>

<main>
    <div id="status" class="status">Apuração em andamento</div>
    <div id="sessao" class="sessao">Sessão 1 de 35</div>
    <div id="countdown" class="countdown">Próxima atualização em: 5</div>

    <!-- PRESIDENTE -->
    <div class="painel">
        <h2>PRESIDENTE</h2>
        <div class="sub">Apuração nacional</div>
        <div class="progress-container"><div id="progPres" class="progress-bar"></div></div>

        <div class="candidatos">
            <div id="pH" class="card">
                <div class="nome">Henrique C.</div>
                <div class="numero">44</div>
                <div>Votos: <span id="vpH">0</span></div>
                <div class="porcentagem"><span id="ppH">0,00</span>%</div>
            </div>
            <div id="pA" class="card">
                <div class="nome">Álvaro A.</div>
                <div class="numero">55</div>
                <div>Votos: <span id="vpA">0</span></div>
                <div class="porcentagem"><span id="ppA">0,00</span>%</div>
            </div>
        </div>

        <div>Total de votos: <span id="tp">0</span></div>
        <div id="zonasPres" class="zonas"></div>
    </div>

    <!-- GOVERNADOR -->
    <div class="painel">
        <h2>GOVERNADOR – Brookhaven</h2>
        <div class="sub">Somente zonas BH</div>
        <div class="progress-container"><div id="progGov" class="progress-bar"></div></div>

        <div class="candidatos">
            <div id="gC" class="card">
                <div class="nome">Charles R.</div>
                <div class="numero">45</div>
                <div>Votos: <span id="vgC">0</span></div>
                <div class="porcentagem"><span id="pgC">0,00</span>%</div>
            </div>
            <div id="gJ" class="card">
                <div class="nome">Jacinto L.</div>
                <div class="numero">44</div>
                <div>Votos: <span id="vgJ">0</span></div>
                <div class="porcentagem"><span id="pgJ">0,00</span>%</div>
            </div>
        </div>

        <div>Total de votos: <span id="tg">0</span></div>
        <div id="zonasGov" class="zonas"></div>
    </div>
</main>

<script>
/* =====================================================
   DADOS FIXOS E CONFIGURAÇÃO
   ===================================================== */
const TOTAL_SESSOES = 35;

// PRESIDENTE
const FINAL_PRES = {H:4218, A:3782};
const TOTAL_PRES = 8000;

// GOVERNADOR
const FINAL_GOV = {C:1273, J:6727};
const TOTAL_GOV = 8000;

// ZONAS
const zonasBH = Array.from({length:14},(_,i)=>"BH-"+String(i+1).padStart(2,"0"));
const zonasNacionais = [
    ...zonasBH,
    ...Array.from({length:11},(_,i)=>"NC-"+String(i+1).padStart(2,"0")),
    ...Array.from({length:12},(_,i)=>"CT-"+String(i+1).padStart(2,"0")),
    ...Array.from({length:10},(_,i)=>"FM-"+String(i+1).padStart(2,"0")),
    ...Array.from({length:14},(_,i)=>"FX-"+String(i+1).padStart(2,"0"))
];

// Distribuição EXATA de zonas por sessão
const zonasPresPorSessao = [];
let idx = 0;
for(let s=1;s<=TOTAL_SESSOES;s++){
    const qtd = s<35 ? Math.floor(zonasNacionais.length/TOTAL_SESSOES) : zonasNacionais.length-idx;
    zonasPresPorSessao.push(zonasNacionais.slice(idx, idx+qtd));
    idx+=qtd;
}
const zonasGovPorSessao = [];
let idxg = 0;
for(let s=1;s<=TOTAL_SESSOES;s++){
    const qtd = s<=14 ? 1 : 0;
    zonasGovPorSessao.push(zonasBH.slice(idxg, idxg+qtd));
    idxg+=qtd;
}

// Regras de liderança
const liderPres = s => s<=15?"A":s<=30?"H":s<=34?"A":"H";
const liderGov  = s => s<=10?"C":s<=25?"J":s<=33?"C":"J";

// Estado
let sessao=1,countdown=5,timer;
let vpH=0,vpA=0,vgC=0,vgJ=0;
let zp=0,zg=0;

// =====================================================
function atualizar(){
    document.getElementById("sessao").innerText=`Sessão ${sessao} de ${TOTAL_SESSOES}`;

    /* PRESIDENTE */
    const lp = liderPres(sessao);
    const zonasP = zonasPresPorSessao[sessao-1];
    const listaP = document.getElementById("zonasPres");
    listaP.innerHTML="<strong>Zonas apuradas:</strong>";

    zonasP.forEach(z=>{
        const v = Math.round(TOTAL_PRES/zonasNacionais.length);
        if(lp==="H"){vpH+=Math.round(v*0.55);vpA+=v-Math.round(v*0.55);}
        else{vpA+=Math.round(v*0.55);vpH+=v-Math.round(v*0.55);}
        listaP.innerHTML+=`<div class="zona"><span>${z}</span><span class="${lp==="H"?"vh":"va"}">${lp==="H"?"Henrique":"Álvaro"}</span></div>`;
    });
    zp+=zonasP.length;

    /* GOVERNADOR */
    const lg = liderGov(sessao);
    const zonasG = zonasGovPorSessao[sessao-1];
    const listaG = document.getElementById("zonasGov");
    listaG.innerHTML="<strong>Zonas apuradas:</strong>";

    zonasG.forEach(z=>{
        const v = Math.round(TOTAL_GOV/zonasBH.length);
        if(lg==="J"){vgJ+=Math.round(v*0.85);vgC+=v-Math.round(v*0.85);}
        else{vgC+=Math.round(v*0.55);vgJ+=v-Math.round(v*0.55);}
        listaG.innerHTML+=`<div class="zona"><span>${z}</span><span class="${lg==="J"?"vh":"va"}">${lg==="J"?"Jacinto":"Charles"}</span></div>`;
    });
    zg+=zonasG.length;

    /* FINAL FORÇADO */
    if(sessao===35){
        vpH=FINAL_PRES.H; vpA=FINAL_PRES.A;
        vgC=FINAL_GOV.C;  vgJ=FINAL_GOV.J;
        zp=zonasNacionais.length; zg=zonasBH.length;
        document.getElementById("status").innerText="APURAÇÃO ENCERRADA – RESULTADO OFICIAL";
        document.getElementById("countdown").innerText="";
        clearInterval(timer);
    }

    /* UI */
    const tp=vpH+vpA, tg=vgC+vgJ;
    document.getElementById("vpH").innerText=vpH.toLocaleString("pt-BR");
    document.getElementById("vpA").innerText=vpA.toLocaleString("pt-BR");
    document.getElementById("ppH").innerText=((vpH/tp)*100).toFixed(2).replace(".",",");
    document.getElementById("ppA").innerText=((vpA/tp)*100).toFixed(2).replace(".",",");
    document.getElementById("tp").innerText=tp.toLocaleString("pt-BR");

    document.getElementById("vgC").innerText=vgC.toLocaleString("pt-BR");
    document.getElementById("vgJ").innerText=vgJ.toLocaleString("pt-BR");
    document.getElementById("pgC").innerText=((vgC/tg)*100).toFixed(2).replace(".",",");
    document.getElementById("pgJ").innerText=((vgJ/tg)*100).toFixed(2).replace(".",",");
    document.getElementById("tg").innerText=tg.toLocaleString("pt-BR");

    document.getElementById("progPres").style.width=(zp/zonasNacionais.length*100)+"%";
    document.getElementById("progGov").style.width=(zg/zonasBH.length*100)+"%";

    document.getElementById("pH").classList.toggle("lider",vpH>vpA);
    document.getElementById("pA").classList.toggle("lider",vpA>vpH);
    document.getElementById("gC").classList.toggle("lider",vgC>vgJ);
    document.getElementById("gJ").classList.toggle("lider",vgJ>vgC);
}

// =====================================================
function iniciar(){
    atualizar();
    timer=setInterval(()=>{
        countdown--;
        document.getElementById("countdown").innerText=`Próxima atualização em: ${countdown}`;
        if(countdown===0){
            sessao++;
            countdown=5;
            if(sessao<=TOTAL_SESSOES) atualizar();
        }
    },1000);
}

iniciar();
</script>
</body>
</html>
