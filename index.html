<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Tribunal Eleitoral • Apuração Oficial</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* =====================================================
   ESTILO INSTITUCIONAL – TRIBUNAL ELEITORAL
   ===================================================== */
:root{
    --verde:#1f8f4a;
    --azul:#0b4ea2;
    --cinza:#f2f4f7;
    --escuro:#1f2933;
    --claro:#ffffff;
}

*{
    box-sizing:border-box;
    font-family: Arial, Helvetica, sans-serif;
}

body{
    margin:0;
    background:var(--cinza);
    color:var(--escuro);
}

header{
    background:linear-gradient(90deg, var(--azul), var(--verde));
    color:#fff;
    padding:16px;
    text-align:center;
}

header h1{
    margin:0;
    font-size:1.3rem;
}

header p{
    margin:4px 0 0;
    font-size:0.9rem;
    opacity:0.95;
}

main{
    max-width:1000px;
    margin:auto;
    padding:16px;
}

.status{
    text-align:center;
    font-weight:bold;
    margin-bottom:10px;
    color:var(--azul);
}

.sessao{
    text-align:center;
    font-weight:bold;
    margin-bottom:6px;
}

.countdown{
    text-align:center;
    font-size:1.4rem;
    color:var(--verde);
    margin-bottom:12px;
}

.progress-container{
    background:#ddd;
    border-radius:10px;
    overflow:hidden;
    height:16px;
    margin-bottom:16px;
}

.progress-bar{
    height:100%;
    width:0%;
    background:linear-gradient(90deg, var(--verde), var(--azul));
    transition:width 0.4s linear;
}

.candidatos{
    display:flex;
    flex-direction:column;
    gap:12px;
    margin-bottom:20px;
}

.card{
    background:var(--claro);
    border-radius:12px;
    padding:14px;
    border:2px solid transparent;
    box-shadow:0 2px 6px rgba(0,0,0,0.08);
}

.card.lider{
    border-color:var(--verde);
    box-shadow:0 0 0 2px rgba(31,143,74,0.25);
}

.nome{
    font-size:1.1rem;
    font-weight:bold;
}

.numero{
    font-size:0.85rem;
    opacity:0.7;
}

.votos{
    margin-top:6px;
}

.porcentagem{
    font-size:1.2rem;
    font-weight:bold;
}

.total{
    text-align:center;
    font-weight:bold;
    margin-bottom:16px;
}

/* ZONAS */
.zonas{
    background:#fff;
    border-radius:12px;
    padding:14px;
    box-shadow:0 2px 6px rgba(0,0,0,0.08);
}

.zonas h3{
    margin:0 0 10px;
    font-size:1rem;
    color:var(--azul);
}

.zona{
    display:flex;
    justify-content:space-between;
    padding:6px 0;
    border-bottom:1px solid #eee;
    font-size:0.9rem;
}

.zona:last-child{
    border-bottom:none;
}

.vencedor-h{
    color:var(--verde);
    font-weight:bold;
}

.vencedor-a{
    color:var(--azul);
    font-weight:bold;
}

@media(min-width:700px){
    .candidatos{
        flex-direction:row;
    }
}
</style>
</head>

<body>
<header>
    <h1>Tribunal Eleitoral</h1>
    <p>2º Turno • Apuração para Presidente</p>
</header>

<main>
    <div id="status" class="status">Apuração em andamento</div>

    <div id="sessao" class="sessao">Sessão 1 de 35</div>
    <div id="countdown" class="countdown">Próxima atualização em: 5</div>

    <div class="progress-container">
        <div id="progressBar" class="progress-bar"></div>
    </div>

    <div class="candidatos">
        <div id="henrique" class="card">
            <div class="nome">Henrique C.</div>
            <div class="numero">Número: 44</div>
            <div class="votos">Votos: <span id="vHenrique">0</span></div>
            <div class="porcentagem"><span id="pHenrique">0,00</span>%</div>
        </div>

        <div id="alvaro" class="card">
            <div class="nome">Álvaro A.</div>
            <div class="numero">Número: 55</div>
            <div class="votos">Votos: <span id="vAlvaro">0</span></div>
            <div class="porcentagem"><span id="pAlvaro">0,00</span>%</div>
        </div>
    </div>

    <div class="total">
        Total de votos apurados: <span id="totalVotos">0</span>
    </div>

    <div class="zonas">
        <h3>Zonas apuradas nesta sessão</h3>
        <div id="listaZonas"></div>
    </div>
</main>

<script>
/* =========================================================
   CONFIGURAÇÃO GERAL DA ELEIÇÃO
   ========================================================= */

// Cargos EXISTENTES no código (somente PRESIDENTE é exibido)
const cargos = [
    "Presidente",
    "Governador",
    "Senador",
    "Deputado Federal",
    "Deputado Estadual",
    "Prefeito",
    "Vereador"
];

// Total oficial
const TOTAL_VOTOS = 8000;
const TOTAL_SESSOES = 35;

// Zonas eleitorais (61 no total)
const zonas = [];

// Brookhaven (14)
for(let i=1;i<=14;i++) zonas.push("BH-" + String(i).padStart(2,"0"));
// Novacore (11)
for(let i=1;i<=11;i++) zonas.push("NC-" + String(i).padStart(2,"0"));
// Casteríber (12)
for(let i=1;i<=12;i++) zonas.push("CT-" + String(i).padStart(2,"0"));
// Fortemega (10)
for(let i=1;i<=10;i++) zonas.push("FM-" + String(i).padStart(2,"0"));
// Florêmix (14)
for(let i=1;i<=14;i++) zonas.push("FX-" + String(i).padStart(2,"0"));

/* =========================================================
   DISTRIBUIÇÃO DAS ZONAS POR SESSÃO
   - Total: 61 zonas
   - 35 sessões (1 ou 2 zonas por sessão)
   ========================================================= */

const zonasPorSessao = [];
let indiceZona = 0;

for(let s=1;s<=TOTAL_SESSOES;s++){
    const qtd = (s % 2 === 0) ? 2 : 1; // alterna 1 e 2 zonas
    zonasPorSessao.push(zonas.slice(indiceZona, indiceZona + qtd));
    indiceZona += qtd;
}

// Ajuste final para garantir todas as zonas
if(indiceZona < zonas.length){
    zonasPorSessao[zonasPorSessao.length-1].push(...zonas.slice(indiceZona));
}

/* =========================================================
   CONTROLE DE REVIROLTAS (QUEM GANHA A SESSÃO)
   ========================================================= */
function liderDaSessao(sessao){
    if(sessao <= 15) return "ALVARO";
    if(sessao <= 30) return "HENRIQUE";
    if(sessao <= 34) return "ALVARO";
    return "HENRIQUE";
}

/* =========================================================
   ESTADO DA APURAÇÃO
   ========================================================= */
let sessaoAtual = 1;
let countdown = 5;
let timer = null;

let votosHenrique = 0;
let votosAlvaro = 0;
let zonasApuradas = 0;

/* =========================================================
   FUNÇÕES AUXILIARES
   ========================================================= */
function fmt(n){
    return n.toLocaleString("pt-BR");
}

/* =========================================================
   ATUALIZA A INTERFACE A CADA SESSÃO
   ========================================================= */
function atualizarSessao(){
    document.getElementById("sessao").innerText =
        `Sessão ${sessaoAtual} de ${TOTAL_SESSOES}`;

    const zonasDaSessao = zonasPorSessao[sessaoAtual-1];
    const lider = liderDaSessao(sessaoAtual);

    const lista = document.getElementById("listaZonas");
    lista.innerHTML = "";

    // Cada zona distribui votos proporcionais
    zonasDaSessao.forEach(zona=>{
        const votosZona = Math.round(TOTAL_VOTOS / zonas.length);

        if(lider === "HENRIQUE"){
            votosHenrique += Math.round(votosZona * 0.55);
            votosAlvaro += votosZona - Math.round(votosZona * 0.55);
        }else{
            votosAlvaro += Math.round(votosZona * 0.55);
            votosHenrique += votosZona - Math.round(votosZona * 0.55);
        }

        const div = document.createElement("div");
        div.className = "zona";
        div.innerHTML = `
            <span>${zona}</span>
            <span class="${lider === "HENRIQUE" ? "vencedor-h":"vencedor-a"}">
                ${lider === "HENRIQUE" ? "Henrique C." : "Álvaro A."}
            </span>
        `;
        lista.appendChild(div);
    });

    zonasApuradas += zonasDaSessao.length;

    // Sessão final: força resultado oficial EXATO
    if(sessaoAtual === TOTAL_SESSOES){
        votosHenrique = 4218;
        votosAlvaro = 3782;
        zonasApuradas = zonas.length;
    }

    const totalAtual = votosHenrique + votosAlvaro;

    const pH = ((votosHenrique / totalAtual) * 100).toFixed(2).replace(".",",");
    const pA = ((votosAlvaro / totalAtual) * 100).toFixed(2).replace(".",",");

    document.getElementById("vHenrique").innerText = fmt(votosHenrique);
    document.getElementById("vAlvaro").innerText = fmt(votosAlvaro);
    document.getElementById("pHenrique").innerText = pH;
    document.getElementById("pAlvaro").innerText = pA;
    document.getElementById("totalVotos").innerText = fmt(totalAtual);

    // Barra de progresso por zonas
    document.getElementById("progressBar").style.width =
        ((zonasApuradas / zonas.length) * 100) + "%";

    // Destaque do líder geral
    document.getElementById("henrique").classList.remove("lider");
    document.getElementById("alvaro").classList.remove("lider");

    if(votosHenrique > votosAlvaro){
        document.getElementById("henrique").classList.add("lider");
    }else{
        document.getElementById("alvaro").classList.add("lider");
    }

    // Encerramento
    if(sessaoAtual === TOTAL_SESSOES){
        document.getElementById("status").innerText =
            "APURAÇÃO ENCERRADA – RESULTADO OFICIAL";
        document.getElementById("countdown").innerText = "";
        clearInterval(timer);
    }
}

/* =========================================================
   CONTROLE AUTOMÁTICO DAS SESSÕES
   ========================================================= */
function iniciarApuracao(){
    atualizarSessao();

    timer = setInterval(()=>{
        countdown--;
        document.getElementById("countdown").innerText =
            `Próxima atualização em: ${countdown}`;

        if(countdown === 0){
            sessaoAtual++;
            countdown = 5;

            if(sessaoAtual <= TOTAL_SESSOES){
                atualizarSessao();
            }else{
                clearInterval(timer);
            }
        }
    },1000);
}

// Inicialização automática
iniciarApuracao();
</script>
</body>
</html>
