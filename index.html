<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Eleições 2026 • Apuração de Alta Tensão</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Oswald:wght@500;700&display=swap" rel="stylesheet">

<style>
:root {
  --bg-dark: #050505;
  --bg-gradient: radial-gradient(circle at 50% -20%, #172554 0%, #020617 60%, #000000 100%);
  --card-glass: rgba(20, 30, 45, 0.6);
  --card-border: rgba(255, 255, 255, 0.08);
  --text-main: #e2e8f0;
  --text-muted: #64748b;
  --accent: #3b82f6;
  --winner: #00d26a; /* Verde Neon */
  --danger: #ef4444; /* Vermelho Alerta */
  --gold: #f59e0b;
  --card-h: 75px;
  --gap: 12px;
}

* { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }

body {
  background-color: var(--bg-dark);
  background-image: var(--bg-gradient);
  background-attachment: fixed;
  color: var(--text-main);
  font-family: 'Inter', sans-serif;
  overflow-x: hidden;
  min-height: 100vh;
  padding-top: 60px; /* Espaço para o banner */
  padding-bottom: 60px;
}

/* --- ALERTA DE INEGIBILIDADE (FIXO E PISCANTE) --- */
.legal-strip {
  position: fixed;
  top: 0; left: 0; width: 100%;
  background: repeating-linear-gradient(
    45deg,
    #7f1d1d,
    #7f1d1d 10px,
    #991b1b 10px,
    #991b1b 20px
  );
  color: #fff;
  z-index: 9999;
  text-align: center;
  padding: 10px;
  font-family: 'Oswald', sans-serif;
  font-size: 0.85rem;
  letter-spacing: 1px;
  box-shadow: 0 5px 30px rgba(0,0,0,0.8);
  border-bottom: 3px solid var(--gold);
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 15px;
}
.legal-strip i { color: var(--gold); animation: blink 0.5s infinite; }
.punishment { background: #000; padding: 2px 8px; border-radius: 4px; color: var(--gold); font-weight: bold; }

/* --- HEADER --- */
header {
  padding: 20px 0;
  text-align: center;
  position: relative;
}
.logo-area {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
}
.logo-title {
  font-family: 'Oswald', sans-serif;
  font-size: 3rem;
  font-weight: 700;
  text-transform: uppercase;
  background: linear-gradient(180deg, #fff 0%, #94a3b8 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  line-height: 1;
  letter-spacing: -2px;
}
.logo-sub {
  color: var(--accent);
  font-size: 0.8rem;
  letter-spacing: 6px;
  text-transform: uppercase;
  margin-top: 5px;
  font-weight: 800;
}

/* --- LAYOUT GRID --- */
.main-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
  max-width: 1400px;
  margin: 0 auto;
  padding: 20px;
}

/* --- PAINÉIS (VIDRO) --- */
.panel {
  background: var(--card-glass);
  backdrop-filter: blur(15px);
  border: 1px solid var(--card-border);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
  position: relative;
  overflow: hidden;
}

/* Header do Painel */
.p-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  border-bottom: 2px solid rgba(255,255,255,0.05);
  padding-bottom: 15px;
  margin-bottom: 20px;
}
.p-title {
  font-family: 'Oswald', sans-serif;
  font-size: 1.8rem;
  color: #fff;
  line-height: 1;
}
.p-meta {
  text-align: right;
  font-size: 0.8rem;
  color: var(--text-muted);
}
.p-urna {
  color: var(--winner);
  font-weight: 700;
  font-size: 1.1rem;
}

/* --- LISTA DE CANDIDATOS --- */
.list-wrapper {
  position: relative;
  height: 700px; /* Altura fixa para permitir animação absoluta */
}

.c-card {
  position: absolute;
  left: 0; right: 0;
  height: var(--card-h);
  background: linear-gradient(90deg, rgba(30,41,59,0.5), rgba(15,23,42,0.8));
  border: 1px solid rgba(255,255,255,0.05);
  border-radius: 6px;
  display: flex;
  align-items: center;
  padding: 0 15px;
  transition: top 0.5s cubic-bezier(0.2, 0.8, 0.2, 1), transform 0.2s, background 0.3s;
}

/* Efeito Liderança */
.c-card.rank-1 {
  background: linear-gradient(90deg, rgba(16, 185, 129, 0.1), rgba(6, 78, 59, 0.2));
  border: 1px solid var(--winner);
  z-index: 10;
  box-shadow: 0 0 20px rgba(16, 185, 129, 0.1);
}
.c-card.rank-1 .pos-badge { background: var(--winner); color: #000; box-shadow: 0 0 10px var(--winner); }
.c-card.rank-1 .pct-num { color: var(--winner); text-shadow: 0 0 15px rgba(16, 185, 129, 0.5); }

/* Badge de Posição */
.pos-badge {
  width: 30px; height: 30px;
  background: #334155;
  border-radius: 4px;
  display: flex; justify-content: center; align-items: center;
  font-weight: 800; font-size: 1rem;
  margin-right: 15px;
  font-family: 'Oswald', sans-serif;
  color: #94a3b8;
  transition: all 0.3s;
}

/* Info Candidato */
.c-info { flex: 1; }
.c-name { display: block; font-weight: 700; font-size: 1.1rem; color: #f1f5f9; letter-spacing: 0.5px; }
.c-party { 
  font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; 
  display: inline-block; background: rgba(255,255,255,0.05); padding: 2px 5px; border-radius: 3px; margin-top: 4px;
}

/* Votos */
.c-stats { text-align: right; min-width: 100px; }
.pct-num { font-family: 'Oswald', sans-serif; font-size: 1.6rem; font-weight: 700; display: block; line-height: 1; }
.abs-num { font-size: 0.8rem; color: var(--text-muted); font-variant-numeric: tabular-nums; }

/* Barra Progresso */
.bar-track {
  position: absolute; bottom: 0; left: 0; width: 100%; height: 3px; background: rgba(0,0,0,0.3);
}
.bar-fill {
  height: 100%; width: 0%; background: var(--accent);
  transition: width 0.3s ease-out;
  position: relative;
  box-shadow: 0 0 10px var(--accent);
}
.rank-1 .bar-fill { background: var(--winner); box-shadow: 0 0 10px var(--winner); }

/* --- EFEITOS DE TENSÃO 10/10 (Prefeito) --- */
.turnover-flash {
  animation: flashScreen 0.2s ease-in-out;
}
@keyframes flashScreen { 0% { background-color: rgba(255,255,255,0.1); } 100% { background-color: transparent; } }

/* Indicador "VOTO A VOTO" */
.neck-neck {
  position: absolute; top: 10px; right: 10px;
  background: var(--danger); color: white;
  padding: 4px 10px; font-weight: 800; font-size: 0.7rem;
  border-radius: 4px; text-transform: uppercase;
  animation: pulsePanic 0.8s infinite;
  display: none;
  z-index: 50;
}
.panel.panic-mode .neck-neck { display: block; }
.panel.panic-mode { border: 1px solid var(--danger); box-shadow: 0 0 30px rgba(239, 68, 68, 0.15); }

/* Diferença de Votos (Badge) */
.diff-tag {
  font-size: 0.7rem; font-weight: bold; padding: 2px 6px; border-radius: 3px;
  margin-top: 2px; display: inline-block;
}
.diff-close { color: var(--gold); background: rgba(245, 158, 11, 0.1); border: 1px solid var(--gold); }
.diff-safe { color: var(--text-muted); opacity: 0.5; }

/* --- FOOTER NEWS --- */
.ticker-wrap {
  position: fixed; bottom: 0; left: 0; width: 100%;
  background: #000; border-top: 2px solid var(--accent);
  height: 40px; display: flex; align-items: center;
  z-index: 100;
}
.ticker-head {
  background: var(--accent); color: #000; padding: 0 20px;
  height: 100%; display: flex; align-items: center;
  font-weight: 800; font-family: 'Oswald';
}
.ticker-move {
  white-space: nowrap; animation: ticker 30s linear infinite;
  color: #fff; padding-left: 20px; font-size: 0.9rem;
}
@keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
@keyframes blink { 50% { opacity: 0; } }
@keyframes pulsePanic { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.1); opacity: 0.8; } 100% { transform: scale(1); opacity: 1; } }

/* Responsividade */
@media (max-width: 900px) {
  .main-grid { grid-template-columns: 1fr; }
  .list-wrapper { height: 750px; }
}
</style>
</head>
<body>

<div class="legal-strip">
  <i class="fas fa-exclamation-triangle"></i>
  <span>RESULTADO SOB SIGILO ATÉ 00H. QUEBRA DE SIGILO ACARRETA EM: <span class="punishment">INEGIBILIDADE POR 1 ELEIÇÃO</span></span>
  <i class="fas fa-exclamation-triangle"></i>
</div>

<header>
  <div class="logo-area">
    <div class="logo-title">ELEIÇÕES 2026</div>
    <div class="logo-sub">Central de Totalização • Ao Vivo</div>
  </div>
</header>

<div class="main-grid">
  
  <div class="panel" id="panelPref">
    <div class="neck-neck">⚠️ DISPUTA VOTO A VOTO</div>
    <div class="p-header">
      <div>
        <div class="p-title">PREFEITO</div>
        <div class="p-meta">Maioria Simples</div>
      </div>
      <div class="p-meta">
        URNAS: <span class="p-urna" id="urnaPref">0.00%</span>
      </div>
    </div>
    <div class="list-wrapper" id="containerPref">
      </div>
  </div>

  <div class="panel">
    <div class="p-header">
      <div>
        <div class="p-title">VEREADOR</div>
        <div class="p-meta">Proporcional • 17 Vagas</div>
      </div>
      <div class="p-meta">
        URNAS: <span class="p-urna" id="urnaVer">0.00%</span>
      </div>
    </div>
    <div class="list-wrapper" id="containerVer">
      </div>
  </div>

</div>

<div class="ticker-wrap">
  <div class="ticker-head" id="tickerLabel">EM TEMPO REAL</div>
  <div class="ticker-move" id="tickerText">
    ACOMPANHE A CHEGADA DOS DADOS • EXPECTATIVA DE RECORDE DE VOTOS • SISTEMA DE APURAÇÃO INICIADO • AGUARDE A TOTALIZAÇÃO
  </div>
</div>

<script>
// --- DADOS (BASEADOS NA SUA LISTA) ---
// Nota: Os votos iniciais aqui são apenas para referência de "potencial".
// O script vai manipular esses números para criar o drama.

const prefeitos = [
  { id: 'p1', nome: "Rodrigo Manga", numero: 28, partido: "PRTB", votos: 0, cor: "#22c55e" },
  { id: 'p2', nome: "Ryan Everton", numero: 22, partido: "PL", votos: 0, cor: "#3b82f6" },
  { id: 'p3', nome: "Arthur Silva", numero: 17, partido: "PSL", votos: 0 },
  { id: 'p4', nome: "Gabriel Arraes", numero: 77, partido: "SD", votos: 0 },
  { id: 'p5', nome: "Javier Mendonza", numero: 35, partido: "PMB", votos: 0 },
  { id: 'p6', nome: "Noah D.", numero: 10, partido: "RPL", votos: 0 },
  { id: 'p7', nome: "Henrique Martins", numero: 15, partido: "MDB", votos: 0 },
  { id: 'p8', nome: "Fernando H.", numero: 43, partido: "PV", votos: 0 }
];

const vereadores = [
  { id: 'v1', nome: "Arthur Albuquerque", numero: 38038, partido: "UDB", votos: 0 },
  { id: 'v2', nome: "Nicollas Camargo", numero: 77400, partido: "SD", votos: 0 },
  { id: 'v3', nome: "Vitor Henrique", numero: 22222, partido: "PL", votos: 0 },
  { id: 'v4', nome: "Marcos Fernandes", numero: 50555, partido: "PSOL", votos: 0 },
  { id: 'v5', nome: "Henry Farias", numero: 77778, partido: "SD", votos: 0 },
  { id: 'v6', nome: "Lucas Junior", numero: 27000, partido: "DC", votos: 0 },
  { id: 'v7', nome: "Michael Nonato", numero: 45555, partido: "PSDB", votos: 0 },
  { id: 'v8', nome: "Thaise Gomes", numero: 11111, partido: "PP", votos: 0 },
  { id: 'v9', nome: "Renato Santos", numero: 17000, partido: "PSL", votos: 0 }
];

// Configuração Global
const TOTAL_URNAS = 2000;
let urnasApuradas = 0;
let isFinished = false;

// --- INICIALIZAÇÃO DE CARDS ---
function initCards(lista, containerId) {
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  lista.forEach((c, i) => {
    const card = document.createElement('div');
    card.className = 'c-card';
    card.id = c.id;
    card.style.top = `${i * (75 + 12)}px`; // Altura + Gap
    
    card.innerHTML = `
      <div class="pos-badge">${i+1}º</div>
      <div class="c-info">
        <span class="c-name">${c.nome}</span>
        <span class="c-party">${c.numero} • ${c.partido}</span>
      </div>
      <div class="c-stats">
        <span class="pct-num">0.00%</span>
        <span class="abs-num">0 VOTOS</span>
        <div class="diff-tag" style="display:none"></div>
      </div>
      <div class="bar-track"><div class="bar-fill"></div></div>
    `;
    container.appendChild(card);
  });
}

initCards(prefeitos, 'containerPref');
initCards(vereadores, 'containerVer');

// --- MOTOR DE DRAMA (CORE) ---
function startSimulation() {
  const interval = setInterval(() => {
    if (urnasApuradas >= TOTAL_URNAS) {
      clearInterval(interval);
      finishElection();
      return;
    }

    // Ritmo variado: acelera no meio, desacelera dramaticamente no final
    let speed = Math.floor(Math.random() * 8) + 2;
    if (urnasApuradas > TOTAL_URNAS * 0.95) speed = 1; // Câmera lenta no final
    
    urnasApuradas += speed;
    const pctGlobal = (urnasApuradas / TOTAL_URNAS) * 100;

    // --- LÓGICA VEREADOR (Tensão 6/10) ---
    // Competitivo, mas com hierarquia clara
    vereadores.forEach((c, idx) => {
      // Base: o rank original da lista tem mais chance de ganhar votos
      let power = (10 - idx) * 2; 
      // Variação aleatória
      let randomVote = Math.floor(Math.random() * power) + Math.floor(Math.random() * 5);
      c.votos += randomVote;
    });

    // --- LÓGICA PREFEITO (Tensão 10/10) ---
    // Script de "Cabeça a Cabeça" forçado
    processDramaPrefeito(pctGlobal);

    updateUI(pctGlobal);

  }, 400); // 400ms por tick
}

function processDramaPrefeito(pct) {
  // O objetivo é fazer Manga (p1) e Ryan (p2) ficarem colados até o fim
  // Os outros recebem sobras
  
  const lider = prefeitos.find(p => p.id === 'p1'); // Manga
  const vice = prefeitos.find(p => p.id === 'p2'); // Ryan

  // Votos base para os menores
  prefeitos.forEach(c => {
    if (c.id !== 'p1' && c.id !== 'p2') {
      c.votos += Math.floor(Math.random() * 5); 
    }
  });

  // DRAMA SCRIPT
  let boostManga = Math.floor(Math.random() * 50);
  let boostRyan = Math.floor(Math.random() * 50);

  // Fase 1: Manga sai na frente (0-30%)
  if (pct < 30) {
    boostManga += 20;
  }
  // Fase 2: Ryan recupera violentamente (30-60%)
  else if (pct >= 30 && pct < 60) {
    boostRyan += 40; // Ryan acelera
  }
  // Fase 3: Cabeça a Cabeça (60-95%)
  else if (pct >= 60 && pct < 95) {
    // Quem estiver atrás ganha boost para empatar
    if (lider.votos > vice.votos) boostRyan += 35;
    else boostManga += 35;
  }
  // Fase 4: O Caos Final (95-100%)
  else {
    // Diferença mínima aleatória
    if (Math.random() > 0.5) boostManga += 15;
    else boostRyan += 15;
  }

  lider.votos += boostManga;
  vice.votos += boostRyan;

  // Efeito Visual de Virada
  const diff = lider.votos - vice.votos;
  if (Math.abs(diff) < 200 && pct > 50) {
    document.getElementById('panelPref').classList.add('panic-mode');
    document.getElementById('tickerLabel').style.background = "var(--danger)";
    document.getElementById('tickerLabel').innerText = "URGENTE";
    document.getElementById('tickerText').innerText = `⚠️ ATENÇÃO: DIFERENÇA DE APENAS ${Math.abs(diff)} VOTOS ENTRE ${lider.nome.toUpperCase()} E ${vice.nome.toUpperCase()}! • CENÁRIO INDEFINIDO!`;
  } else {
    document.getElementById('panelPref').classList.remove('panic-mode');
    if(pct < 100) {
        document.getElementById('tickerLabel').style.background = "var(--accent)";
        document.getElementById('tickerLabel').innerText = "EM TEMPO REAL";
    }
  }
}

// --- ATUALIZAÇÃO UI ---
function updateUI(pctGlobal) {
  // Atualiza contadores de % de urna
  document.getElementById('urnaPref').textContent = pctGlobal.toFixed(2) + '%';
  document.getElementById('urnaVer').textContent = pctGlobal.toFixed(2) + '%';

  updatePanel(prefeitos, 'p1', 'p2');
  updatePanel(vereadores, 'v1', 'v2');
}

function updatePanel(lista, idLiderOriginal, idViceOriginal) {
  // Ordena
  const ranking = [...lista].sort((a, b) => b.votos - a.votos);
  const totalVotos = lista.reduce((sum, c) => sum + c.votos, 0);
  const votosLider = ranking[0].votos;

  ranking.forEach((c, index) => {
    const card = document.getElementById(c.id);
    const pct = totalVotos > 0 ? (c.votos / totalVotos * 100).toFixed(2) : "0.00";
    
    // Posição Y (Animação)
    card.style.top = `${index * (75 + 12)}px`;

    // Dados Texto
    card.querySelector('.pct-num').textContent = pct + '%';
    card.querySelector('.abs-num').textContent = c.votos.toLocaleString('pt-BR');
    card.querySelector('.pos-badge').textContent = (index + 1) + 'º';

    // Barra
    const barW = votosLider > 0 ? (c.votos / votosLider * 100) : 0;
    card.querySelector('.bar-fill').style.width = barW + '%';

    // Badge Diferença (Só mostra para o 2º lugar se tiver perto)
    const diffTag = card.querySelector('.diff-tag');
    if (index === 1) {
      const diff = votosLider - c.votos;
      diffTag.style.display = 'inline-block';
      diffTag.textContent = `-${diff.toLocaleString()}`;
      diffTag.className = diff < 5000 ? 'diff-tag diff-close' : 'diff-tag diff-safe';
    } else {
      diffTag.style.display = 'none';
    }

    // Estilos de Líder
    if (index === 0) {
      card.classList.add('rank-1');
    } else {
      card.classList.remove('rank-1');
    }
  });
}

function finishElection() {
  document.getElementById('urnaPref').textContent = "100%";
  document.getElementById('urnaVer').textContent = "100%";
  document.getElementById('tickerLabel').style.background = "#00d26a"; // Verde
  document.getElementById('tickerLabel').innerText = "ELEITO";
  document.getElementById('tickerText').innerText = "APURAÇÃO ENCERRADA • RESULTADOS MATEMATICAMENTE DEFINIDOS • PREFEITO E VEREADORES ELEITOS • CONFIRA OS DADOS";
  
  // Remove modo pânico
  document.getElementById('panelPref').classList.remove('panic-mode');
  
  // Confete ou brilho final
  document.body.style.background = "#020617"; // Fica mais escuro para destaque
}

// Iniciar
setTimeout(startSimulation, 1000);

</script>
</body>
</html>
